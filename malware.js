/** @param {NS} ns **/
export async function main(ns) {

	var threadNum = ns.args[0];

	// ns.toast("There are this many threads running in malware.js " + threadNum, "warning", 5000)

	const HOST = ns.getHostname();

	var operational = true;

	// ns.toast('Malware successfully executed.', 'success', 5000)

	while (operational) {


		if (ns.getServerSecurityLevel(HOST) > (1 + (.05 * threadNum))) {
			await ns.weaken(HOST, { threads: threadNum });
		}

		if (ns.getServerMoneyAvailable(HOST) < ns.getServerMaxMoney(HOST)) {
			await ns.grow(HOST, { threads: threadNum });
		}

		await ns.hack(HOST, { threads: threadNum });

	}
}
